<head>
  <title>Resources - Ubiregi API</title>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="/ubiregi-api/bootstrap.min.css">
  <link rel="stylesheet" href="/ubiregi-api/top.css">
</head>
<body>
  <div class="topbar">
    <div class="topbar-inner">
      <div class="container">
      	<div class="row">
      	  <div class="span12 offset2">
      	    <h3><a href="/ubiregi-api/index.html">Ubiregi API</a></h3>
      	    <ul class="nav">
    	        <li class=""><a href="/ubiregi-api/registration.html">Registration</a>     	      
      	      <li class=""><a href="/ubiregi-api/authentication.html">Authentication</a>
      	      <li class="active"><a href="/ubiregi-api/resources.html">Resources</a>
      	      <li class=""><a href="/ubiregi-api/errors.html">Error handling</a>
      	    </ul>
      	  </div>
      	</div>
      </div>
    </div>
  </div>
  
  <div class="container" style="margin-top:60px; margin-bottom:2em">
    <div class="row">
      <div class="span12 offset2">
	<h1 id='objects'>Objects</h1>

<h2 id='account'>Account</h2>
<pre>
{
    token: 3q489y3bq94oghrnontv48,
    login: "ubiregi-cafe",
    email: "cafe@ubiregi.com",
    name: "Ubiregi Cafe",
    subscription_expire_at: "2011-11-13T00:00:00Z",
    subscription_kind: "premium",
    menus: [ 8 ],
    stocks: [ 100 ],
    tables: [ $tables ],
    customer_tags: [ $customer_tags ],
    cashiers: [ $cashiers ],
}
</pre>
<h2 id='table'>Table</h2>
<pre>
{
    id: 123,
    name: "Table 1",
    position: 3,
}
</pre>
<h2 id='customer_tag'>Customer Tag</h2>
<pre>
{
    id: 123,
    name: "Dating",
    potision: 13,
    icon: ::base64EncodedIcon,
}
</pre>
<h2 id='cashier'>Cashier</h2>
<pre>
{
    id: 385,
    name: "Soutaro Matsumoto",
    icon: ::base64EncodedIcon,
}
</pre>
<h2 id='menu_item'>Menu Item</h2>

<h1 id='account'>Account</h1>

<h2 id='get_account'>GET /account</h2>

<h3 id='summary'>Summary</h3>

<p>Retrieves information about the account.</p>

<h3 id='response'>Response</h3>

<p>An <code>Account</code> object. <pre>
{
    account: $account,
    timestamp: "2011-11-02T09:11:34Z",
}
</pre></p>

<h3 id='parameters'>Parameters</h3>
<table>
<tr>
<th>until (optional)</th>
<td>
    Timestamp used to make tables, customer_tags, and cashiers contains only updated ones.
    Encouraged to include this parameter if the access is not the first one nor explicitly want to reload everything.
</td>
</tr>
</table>
<h3 id='note'>Note</h3>

<p>Accesses to <code>/account</code> do not expire. Even if your account is expired, it returns your account&#8217;s information. However menus, stocks, tables, customer_tags, and cashiers will be empty in that case.</p>

<h1 id='menu'>Menu</h1>

<h2 id='get_menusiditems'>GET /menus/:id/items</h2>

<h3 id='summary'>Summary</h3>

<dl>
<dt>Description</dt>

<dd>Retrieves list of menu items.</dd>

<dt>URL Structure</dt>

<dd><code>https://ubiregi.com/api/3/menus/:id/items</code></dd>
</dl>

<h3 id='parameters'>Parameters</h3>

<p>The parameters should be given as URL parameters.</p>

<pre><code>/menus/0/items?since=2011-12-01T12:34:11Z&amp;until=2011-12-02T12:11:15Z&amp;glb=1023</code></pre>
<table>
	<tr>
		<th>since (optional)</th>
		<td>Time in ISO 8601 format. The timezone should be UTC. Inclusive.</td>
	</tr>
	<tr>
		<th>until (optional)</th>
		<td>Time in ISO 8601 format. the timezone must be UTC. Exclusive.</td>
	</tr>
	<tr>
		<th>glb (optional)</th>
		<td>Greates lower bound of id of menu item.</td>
	</tr>
</table>
<h3 id='sample_response'>Sample Response</h3>
<pre>
{
  timestamp: "2011-11-23T00:01:11Z",
  next-url: "https://ubiregi.com/api/3/menus/30/items?since=2011-12-01T12:34:11Z&amp;until=2011-11-23T00:01:11Z&amp;glb=123",
  items: [
    _item_,
    _item_,
    ...
  ]
}
</pre>
<h3 id='return_value_definitions'>Return value definitions</h3>

<dl>
<dt>timestamp</dt>

<dd>Time the request is processed on server. This would be used for next time to send the request.</dd>

<dt>next_url (optional)</dt>

<dd>URLs to send GET request to complete the refresh. null in the case there are no more item to refresh.</dd>

<dt>items</dt>

<dd>Array of updated items since <code>since</code> parameter.</dd>
</dl>

<h2 id='post_menusiditems'>POST /menus/:id/items</h2>

<h3 id='summary'>Summary</h3>

<dl>
<dt>Description</dt>

<dd>Add new menu item.</dd>

<dt>URL Structure</dt>

<dd><code>https://ubiregi.com/api/3/menus/:id/items</code></dd>
</dl>

<h4 id='remarks'>Remarks</h4>

<p>A creation and update of new items is transactional, i.e. all items will be created successfully, or all items will be rejected.</p>

<h2 id='get_menusidcategories'>GET /menus/:id/categories</h2>

<h2 id='post_menusidcategories'>POST /menus/:id/categories</h2>

<h2 id='post_menuscategoriesiddelete'>POST /menus/categories/:id/delete</h2>

<h3 id='summary'>Summary</h3>

<dl>
<dt>Description</dt>

<dd>Delete the category.</dd>

<dt>URL Structure</dt>

<dd><code>https://ubiregi.com/api/3/menus/categories/:id/delete</code></dd>
</dl>

<h3 id='parameters'>Parameters</h3>

<p>No parameter can be given.</p>

<h3 id='remarks'>Remarks</h3>

<p>All menu items associated with the category will be updated. Reloading items required.</p>

<h3 id='sample_response'>Sample Response</h3>
<pre>
{}
</pre>
<h2 id='get_menusidtags'>GET /menus/:id/tags</h2>

<h2 id='get_tags'>GET /tags</h2>

<h2 id='post_tags'>POST /tags</h2>

<h2 id='get_checkouts'>GET /checkouts</h2>

<h2 id='post_checkouts'>POST /checkouts</h2>

<h2 id='get_customers'>GET /customers</h2>

<h2 id='post_customers'>POST /customers</h2>

<h2 id='get_customersidnotes'>GET /customers/:id/notes</h2>

<h2 id='post_customersidnotes'>POST /customers/:id/notes</h2>

<h2 id='get_stocks'>GET /stocks</h2>

<h2 id='get_stocksid'>GET /stocks/:id/</h2>

<h2 id='get_stocksitemsidevents'>GET /stocks/items/:id/events</h2>

<h2 id='post_stocksitemsidevents'>POST /stocks/items/:id/events</h2>
      </div>
    </div>
  </div>
  <hr>
  <div class="container" style="text-align:center; margin-bottom:2em">
    &copy; 2011 Ubiregi Inc. All rights reserved.
  </div>
</body>
